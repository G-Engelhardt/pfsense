# Curso GR√ÅTIS de Firewall e Proxy Netgear pfSense NG UTM 2.x

## üí∞ Ajude o projeto Bora para Pr√°tica a continuar fazendo v√≠deos gratuitos para o Canal, acessando o link de doa√ß√£o do PagSeguro: https://pag.ae/bjlSJcH

Robson Vaamonde<br>
Procedimentos em TI: http://procedimentosemti.com.br<br>
Bora para Pr√°tica: http://boraparapratica.com.br<br>
Robson Vaamonde: http://vaamonde.com.br<br>
Facebook Procedimentos em TI: https://www.facebook.com/ProcedimentosEmTi<br>
Facebook Bora para Pr√°tica: https://www.facebook.com/boraparapratica<br>
Instagram Procedimentos em TI: https://www.instagram.com/procedimentoem<br>
YouTUBE Bora Para Pr√°tica: https://www.youtube.com/boraparapratica<br>

Esse curso tem como objetivo demonstrar a instala√ß√£o e configura√ß√£o do Firewall NG Netgear pfSense (vers√µes superiores a 2.x) em m√°quina Virtual utilizando o Oracle VirtualBOX para simular um ambiente corporativo de Pequeno e M√©dio Porta, utilizando os principais recursos de Firewall, Proxy, VPN, etc...

O pfSense √© open source, licenciado sob BSD license, baseado no sistema operacional FreeBSD e adaptado para assumir o papel de um firewall e/ou roteador de redes.

Ideal para Estudantes e Profissionais de Redes que desejam se aprofundar nos pr√©-requisitos t√©cnicos e pr√°ticos para Implementar Servidores GNU/Linux Ubuntu Server em cen√°rios On-Premise ou Cloud.

## **Links Oficiais do Ubuntu, Mint, pfSense, Microsoft e VirtualBOX:**
Linux Mint: https://www.linuxmint.com/<br>
pfSense: https://www.pfsense.org/<br>
Oracle VirtualBOX: https://www.virtualbox.org/

## **Playlist do YouTUBE com todos os V√≠deos do pfSense:**
Link da Playlist: https://www.youtube.com/playlist?list=PLozhsZB1lLUN7vHnCDA2NF6rMfTBs-vAs

## **COMO instalar o UTM/NGFW pfSENSE FIREWALL v2.4.4 no Oracle VirtualBOX**

V√≠deo mostrando os procedimentos b√°sicos para instalar o UTM (Unified Threat Management) pfSENSE Firewall v2.4.4 no Oracle VirtualBOX

O UTM pfSENSE e umas melhores solu√ß√µes Open Source de Firewall, Proxy, Router, etc do momento, licenciado sob BSD license, baseado no sistema operacional FreeBSD e adaptado para assumir o papel de um firewall e/ou roteador de redes. Ele possui recursos que muitas vezes, s√≥ encontrada em Firewall comerciais caros, j√° que podemos realizar com o pfSense a imensa maioria das atividades que esperamos de sistemas com este t√≠tulo.

Hoje o pfSense tamb√©m pode ser considerado um NGFW (Next Generation Firewall), possibilitando a integra√ß√£o de servi√ßos como: Firewall, Proxy, Antiv√≠rus, IDS/IPS, Balanceamento de Carga, Relat√≥rios e Inspe√ß√£o Profunda de Pacotes (DPI).

Link da v√≠deo aula: https://www.youtube.com/watch?v=N-Cbq1AaEyM

## **CONHECENDO o console do UTM pfSENSE FIREWALL v2.4.4**

V√≠deo mostrando os procedimentos b√°sicos para utilizar o Console do UTM pfSense

A ferramenta de console do UTM pfSense permite fazer algumas configura√ß√µes r√°pidas do sistema, principalmente a parte de atribui√ß√£o (associa√ß√£o) das interfaces, configura√ß√µes do endere√ßamento IPv4 ou IPv6 da WAN, LAN, etc, Reset de Senha e Configura√ß√µes, Restore de Backup, atualiza√ß√£o do sistema, monitoramento e acesso ao Bash/Shell do UTM pfSense.

O console do UTM pfSense √© a primeira etapa da configura√ß√£o do sistema, raramente ser√° utilizado com muita frequ√™ncia, todas as configura√ß√µes principais e administra√ß√£o s√£o feitas no WebConfigurator (WebGUI).

Link da v√≠deo aula: https://www.youtube.com/watch?v=rKef7WePAk0

## **CONHECENDO o WEBGUI WEBCONFIGURATOR do UTM pfSENSE FIREWALL v2.4.4**

V√≠deo mostrando os procedimentos b√°sicos para utilizar o WebGUI (Graphics User Interface) WebConfigurator do UTM pfSensse Firewall

A ferramenta de WebGUI - WebConfigurator do UTM pfSense permite fazer todas as configura√ß√µes b√°sicas e avan√ßadas, toda a administra√ß√£o, gerenciamento, monitoramento, atualiza√ß√£o e seguran√ßa ser√° feita utilizando o WebGUI. Ap√≥s a instala√ß√£o do pfSense e suas configura√ß√µes b√°sicas via Console, precisamos acessar o WebGUI para finalizar a instala√ß√£o.

Recomenda√ß√µes: Recomendo utilizar o Navegador de Web Mozilla Firefox, que tem uma maior compatibilidade com solu√ß√µes Open Source: https://www.mozilla.org/pt-BR/firefox/, em nosso exemplo, vamos acessar o servidor com endere√ßo IPv4: http://172.16.10.254, nos pr√≥ximos v√≠deos vou mostrar como configurar o ambiente para trabalhar com HTTPS, Usu√°rio padr√£o do pfSense √©: admin, e senha padr√£o √©: pfsense.

Informa√ß√µes extras:
PPPoE: https://pt.wikipedia.org/wiki/PPPoE
PPP: https://pt.wikipedia.org/wiki/Point-to-Point_Protocol
PPTP: https://pt.wikipedia.org/wiki/Point-to-Point_Tunneling_Protocol
Obs: no v√≠deo falei de PPTP com refer√™ncia a Fax-Modem, na qual usa o Protocolo PPP, o PPTP faz T√∫nel VPN, por-favor, desconsiderar, pois o PPTP pode trabalhar em conjunto com Dial-Up e PPP)
RFC 1918: https://pt.wikipedia.org/wiki/Rede_privada
Redes Bogon: https://en.wikipedia.org/wiki/Bogon_filtering
Carrier Grade NAT: https://pt.wikipedia.org/wiki/Carrier_Grade_NAT

Link da v√≠deo aula: https://www.youtube.com/watch?v=H6VLgpfXvmg

## **CONHECENDO o DASHBOARD do UTM pfSENSE FIREWALL v2.4.4**

V√≠deo mostrando os procedimentos b√°sicos para utilizar o Dashboard (Painel de Instrumentos) do WebGUI (Graphics User Interface) WebConfgiurator do UTM pfSensse Firewall v2.4.4

A ferramenta de Dashboard do UTM pfSense permite fazer um monitoramento r√°pido da sa√∫de do pfSense, analisando os principais recursos e desempenho da rede, monitorando o status de servi√ßos de rede, trafego de rede e muito mais, facilitando bastante a analise de erros e provendo solu√ß√µes r√°pidas.

Recomenda√ß√µes: Recomendo utilizar o Navegador de Web Mozilla Firefox, que tem uma maior compatibilidade com solu√ß√µes Open Source: https://www.mozilla.org/pt-BR/firefox/, em nosso exemplo, vamos acessar o servidor com endere√ßo IP: http://172.16.10.254, nos pr√≥ximos v√≠deos vou mostrar como configurar o ambiente para trabalhar com HTTPS, Usu√°rio padr√£o do pfSense √©: admin, e senha padr√£o √©: pfsense, ap√≥s a configura√ß√£o do WebGUI via Wizard, utilizar a senha que foi configurada.

Informa√ß√µes extras:
Dashboard: https://pt.wikipedia.org/wiki/Painel_de_bordo
Plug-in: https://pt.wikipedia.org/wiki/Plug-in
Obs: no v√≠deo falo bastante sobre Plug-in, no pfSense o conceito correto e Widget quando se trabalha com Dashboard, s√≥ desconsiderar a fala
Widget: https://pt.wikipedia.org/wiki/Widget
Drag-and-Drop: https://pt.wikipedia.org/wiki/Drag-and-drop
Round Trip Time: https://pt.wikipedia.org/wiki/Round_Trip_Time
Obs: conceito utilizado no Widget de Gateways

Link da v√≠deo aula: https://www.youtube.com/watch?v=REF3pCYIKnc&t

## **EXPLORANDO o WebGUI do UTM pfSENSE FIREWALL v2.4.4**

V√≠deo mostrando os procedimentos b√°sicos para utilizar o WebGUI (Graphics User Interface) do UTM pfSensse Firewall v2.4.4

Toda a administra√ß√£o e configura√ß√£o do UTM pfSense ser√° feita utilizando o WebGUI, no pfSense o menu est√° dividido em v√°rias √°reas, facilitando a administra√ß√£o, todas as op√ß√µes de configura√ß√£o do pfSense s√£o auto-explicativas e sempre tem uma ajuda escrita nos campos ou links para facilitar o entendimento da configura√ß√£o.

Menu est√° dividido nas seguintes op√ß√µes:
System (sistema): Configura√ß√µes gerais do sistema do UTM pfSense;
Interfaces (placas de rede): Configura√ß√µes gerais das interfaces de rede;
Firewall: Configura√ß√µes gerais das regras de firewall;
Services (servi√ßos): Configura√ß√µes gerais dos servi√ßos de rede;
VPN (redes virtuais privadas): Configura√ß√µes gerais dos servi√ßos de T√∫nel VPN;
Status (estado/condi√ß√£o): Condi√ß√µes gerais dos servi√ßos de rede;
Diagnostics (diagn√≥stico): Ferramentas de an√°lise de falhas e diagnostico do sistema;
Help (ajuda): Link de acesso a ajuda da ferramenta UTM pfSense

Link da v√≠deo aula: https://www.youtube.com/watch?v=bbSvFvwQW7M&t

## **COMO atualizar o UTM pfSENSE FIREWALL v2.4.4 para nova Vers√£o**

V√≠deo mostrando os procedimentos b√°sicos para atualizar a vers√£o do UTM pfSENSE 2.4.4 para a nova vers√£o 2.4.4.2

O Appliance do pfSense sofre atualiza√ß√µes constante da comunidade, sempre √© uma boa pr√°tica manter o sistema atualizado, mais infelizmente problemas na atualiza√ß√£o pode acontecer, recomendo sempre fazer um Backup antes (v√≠deo ser√° feito em breve) ou se voc√™ utiliza m√°quina virtual, fazer um Snapshoots, caso tenha alguma falha, voc√™ tem a possibilidade de voltar uma vers√£o anterior sem erros.

Informa√ß√µes extras:
Backup: https://pt.wikipedia.org/wiki/C%C3%B3pia_de_seguran%C3%A7a
Snapshot: https://pt.wikipedia.org/wiki/C%C3%B3pia_instant%C3%A2nea_de_volume

Link da v√≠deo aula: https://www.youtube.com/watch?v=79OOQOpT794&t

## **CONFIGURANDO o Acesso Seguro do SSH e CONSOLE no UTM pfSENSE FIREWALL v2.4.4**

V√≠deo mostrando os procedimentos b√°sicos para configurar o acesso remoto seguro utilizando o SSH e porta Console do UTM pfSensse Firewall v2.4.4

Toda a administra√ß√£o e configura√ß√£o do UTM pfSense ser√° feita utilizando o WebGUI, algumas configura√ß√µes iniciais s√£o feitas utilizando o Console, caso tenha alguma falha de acesso remoto utilize o console que √© a forma mais simples e r√°pida de acesso, temos tamb√©m a possibilidade de acessar o console e o shell do pfSense via conex√£o segura utilizando o OpenSSH Client.

#Configura√ß√£o da Porta Console
adicionar o usu√°rio aos Grupos: tty e dialout

#Instalando o PuTTY e FileZilla
sudo apt update && sudo apt install putty putty-tools filezilla

#Gerando a Chave P√∫blica do SSH
ssh-keygen

#Localiza√ß√£o padr√£o das Chaves P√∫blicas e Privadas
cd /home/vaamonde/.ssh/

Informa√ß√µes extras:
OpenSSH: https://pt.wikipedia.org/wiki/OpenSSH
Console: https://pt.wikipedia.org/wiki/Interface_de_linha_de_comandos
Chaves Privadas/Publicas: https://pt.wikipedia.org/wiki/Criptografia_de_chave_p%C3%BAblica
Putty: https://www.putty.org/
Filezilla: https://filezilla-project.org/

Link da v√≠deo aula: https://www.youtube.com/watch?v=t5gtSGaShn4&t

## **CONFIGURANDO a CA e CERTIFICADOS no UTM pfSENSE FIREWALL v2.4.4**

V√≠deo mostrando os procedimentos b√°sicos para configurar uma CA (Certification Authority - Autoridade de Certifica√ß√£o) e a gera√ß√£o de Certificados para trabalhar com o Servi√ßo de HTTPS do UTM pfSENSE FIREWALL v2.4.4

Toda a administra√ß√£o e configura√ß√£o do UTM pfSense ser√° feita utilizando o WebGUI, para manter a seguran√ßa de acesso local ou externo, √© recomendado a configura√ß√£o do Protocolo HTTPS utilizando um Certificado V√°lido para permiti conex√µes seguras, para isso tamb√©m √© necess√°rio a cria√ß√£o de uma CA que vai validar o certificado e permiti o acesso.

OBSERVA√á√ÉO IMPORTANTE: 19:00 No Linux Mint, o navegador Google Chrome n√£o usa a cadeia de CA padr√£o, devendo fazer o procedimento de instala√ß√£o manual, acessando: Menu, Configura√ß√µes, Pesquisando Gerenciador de Certificado, clicar na aba Autoridade, depois clicar em Importar, localizar o arquivo de CA, marcar as op√ß√µes de Confiar em Website, Email e Software, clicar em: OK.

Informa√ß√µes extras:
CA: https://pt.wikipedia.org/wiki/Autoridade_de_certifica%C3%A7%C3%A3o
Certificado: https://pt.wikipedia.org/wiki/Certificado_digital
Chaves Privadas/Publicas: https://pt.wikipedia.org/wiki/Criptografia_de_chave_p%C3%BAblica
Criptografia: https://pt.wikipedia.org/wiki/Criptografia

Link da v√≠deo aula: https://www.youtube.com/watch?v=BvNAVlbdOdo&t